<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>String객체4</title>
</head>
<body>
  <script>
    //주제 : 문자열 객체 메소드를 이용해 사이트 이용자로 부터 입력받은 이메일의 유효성 검사하는 예제

    //1. 사용자로부터 이메일을 입력받아 userEmail변수에 저장
    let userEmail = prompt("이메일을 입력하시오.");

    //2. 이메일 작성시 검사할 문자열들이 저장될 배열 생성
    let arrUrl = [".co.kr", ".com", ".net", ".or.kr", ".go.kr"];
    //                0         1       2       3       4         index

    //3. 입력한 이메일이 @단어가 포함되어 있으면 true 문자열을 저장하고 포함되어있지 않으면 false를 저장할 
    //   check 변수를 만들고 초깃값으로 false를 저장하자.
    let check = false;

    //4. 입력한 이메일과 arrurl배열메모리에 저장된 단어를 하나씩 비교해서 일치하면 true 저장하고, 
    //   일치하지 않으면 fasle를 저장할 check2 변수를 만들고 초깃값으로 false를 저장
    let check2 = false;

    //5. if조건문을 이용하여 입력한 이메일 전체 문자열에 '@'단어가 포함되어 있으면 check 변수에 true를 저장
    /*
    if(userEmail.match("@") == "@"){ // userEmail.match("@")는 자료형이 object로 반환됨 그래서 === 쓰면 거짓으로 나옴

      check = true;

    }
      */
    if(userEmail.indexOf("@") > 0){

      check = true;

    }
    
    //6. for반복문을 이용하여 arrurl배열을 순회하면서 입력한 이메일과 arrurl배열에 저장된 각 문자열을 차례로 비교하여 
    //   1개의 단어라도 일치하면 check2 변수에 true를 저장

    for(let i=0; i<arrUrl.length; i++){

      //if(userEmail.match(arrUrl[i])!== null){
      if(userEmail.indexOf(arrUrl[i]) > 0){

        check2 = true;

      }

    }

    //7. check변수, check2변수에 저장된 값이 모두 true라면?
    //   (if문을 사용하여 조건식이 참이면?) 입력한 이메일 출력!
    //   거짓이면? "이메일 형식이 잘못되었습니다." <- alert()메소드로 알림창 보여주기

    if(check && check2){ // check == true && check2 == true  -> check && check2

      document.write(userEmail);

    }
    else{

      alert("이메일 형식이 잘못되었습니다.");

    }






  </script>
</body>
</html>